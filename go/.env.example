# Hazuki (Go) - .env 示例
#
# 用法：
#   cd go
#   cp .env.example .env
#   go run ./cmd/hazuki
#
# 注意：
# - 这份 .env 仅供 Go 版本使用（go/cmd/hazuki）。
# - 首次启动会用 .env 里的值 seed 到 SQLite；之后以 SQLite 为准，建议用 Web 面板管理。
# - 如果你想让 .env 的 seed 重新生效：停止服务后删除/移动数据库文件（HAZUKI_DB_PATH）。
#
# ===== Hazuki (Go 运行时) =====

# SQLite 文件路径（相对当前工作目录）。
HAZUKI_DB_PATH=./data/hazuki.db

# 用于加密敏感配置（GitHub Token / Worker Secret 等）。
# 建议设置强随机值并长期保持不变；如果 SQLite 里已保存了加密值（enc:v1:...），启动时必须提供同一个 HAZUKI_MASTER_KEY。
HAZUKI_MASTER_KEY=change-me-to-a-long-random-string

# Session 过期时间（秒）
HAZUKI_SESSION_TTL_SECONDS=86400

# 可选：无人值守首次启动自动创建管理员（仅在 users 表为空时生效）。
# 如果不设置，也可以启动后访问 /setup 在 Web 端创建管理员。
HAZUKI_ADMIN_USERNAME=admin
HAZUKI_ADMIN_PASSWORD=change-me-please

# ===== cdnjs / jsDelivr 缓存（seed config; only used when DB is empty) =====

# 上游 CDN（一般不需要改）
ASSET_URL=https://cdn.jsdelivr.net

# /gh/<user>/... 的访问策略：
# - allowlist：只允许 ALLOWED_GH_USERS（留空=全部拒绝）
# - denylist：默认全部允许，仅拒绝 BLOCKED_GH_USERS（留空=全部允许）
GH_USER_POLICY=allowlist

# 允许使用 /gh/<user>/... 的 GitHub 用户白名单（逗号分隔，大小写不敏感）。
# 仅 allowlist 模式生效；为空则 /gh 全部拒绝。
ALLOWED_GH_USERS=XMZO,starsei

# denylist 模式下拒绝的 GitHub 用户黑名单（逗号分隔，大小写不敏感）。
# 仅 denylist 模式生效；为空则 /gh 全部允许。
BLOCKED_GH_USERS=

# 默认用户：请求 /<repo@ref/path> 会走 /gh/DEFAULT_GH_USER/<repo@ref/path>。
# 为空则短路径会返回 400。
DEFAULT_GH_USER=XMZO

# Redis（用于缓存；建议生产环境启用）
REDIS_HOST=127.0.0.1
REDIS_PORT=6379

# ===== git（seed config; only used when DB is empty) =====

# GitHub Personal Access Token（访问私有仓库时需要）。留空表示不带认证请求上游。
GITHUB_TOKEN=

# token 或 Bearer（通常用 token；GitHub API 常用 Bearer，但 raw 也可用）
GITHUB_AUTH_SCHEME=token

# 上游域名（默认 raw.githubusercontent.com）
UPSTREAM=raw.githubusercontent.com
UPSTREAM_MOBILE=raw.githubusercontent.com

# 默认仓库路径（至少 3 段）：/owner/repo/branch
UPSTREAM_PATH=/XMZO/pic/main

# true=https, false=http
UPSTREAM_HTTPS=true

# 缓存策略（服务端响应 Cache-Control）
DISABLE_CACHE=false

# 不为空时将覆盖所有类型；留空则按内容类型使用下面默认值
CACHE_CONTROL=

# 图片/视频/音频/字体，或无法识别的类型
CACHE_CONTROL_MEDIA=public, max-age=43200000

# HTML/CSS/JS/JSON/XML/TOML/YAML 等
CACHE_CONTROL_TEXT=public, max-age=60

# 访问控制
BLOCKED_REGION=

# 封禁 IP（逗号分隔）。留空=不封禁。
# 注意：如果你想使用默认封禁（0.0.0.0,127.0.0.1），请删除这一行（让它“不存在”）。
BLOCKED_IP_ADDRESS=

# CORS
CORS_ORIGIN=*
CORS_ALLOW_CREDENTIALS=false
CORS_EXPOSE_HEADERS=Accept-Ranges, Content-Length, Content-Range, ETag, Cache-Control, Last-Modified

# HTML 内容替换（JSON 对象）。占位符：$upstream / $custom_domain
REPLACE_DICT={"$upstream":"$custom_domain"}

# ===== torcherino（seed config; only used when DB is empty) =====

# 默认上游域名（不带协议），当 HOST_MAPPING 未命中时使用。
DEFAULT_TARGET=

# 多域名映射（JSON 对象：host -> targetHost），只填域名，不要带 http(s)://
HOST_MAPPING={}

# Worker Secret（可选）：用于向上游注入验证 Header。
WORKER_SECRET_KEY=

# 自定义验证 Header 名称（逗号分隔）；为空则默认 x-forwarded-by-worker。
WORKER_SECRET_HEADERS=

# 不同 Header 使用不同值（JSON 对象）；会覆盖同名 Header 的 WORKER_SECRET_KEY 设置。
# 可用 "__SET__" 表示沿用已保存的值（适合在 Web 面板里编辑时避免泄露）。
WORKER_SECRET_HEADER_MAP={}
